<div class="container" id="pgp">

  <div class="container m-10">
    <h2>Check out our Games!!</h2>
  </div>
  <div id='map' style='width: 100%; height: 300px;' data-controller="map" data-map-markers-value="<%= @markers.to_json %>" data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
  <din class ="search">
    <%= form_with url: games_path, method: :get, class: "d-flex my-3 mx-3" do %>
      <%= text_field_tag :query,
        params[:query],
        class: "form-control",
        placeholder: "Find a game"
      %>
      <button name="button" type="submit" class="btn btn-outline-light">
      <i class="fas fa-search"></i> Search
      </button>
    <% end %>
  </din>
  <div class="container m-8">
      <div class="row">
        <% @games.each do |game| %>
          <div class="col-md-3">
            <div class="card h-100 text-center mb-5">
            <% if game.image.key != nil %>
              <img src="<%= cl_image_path game.image.key %>" class="card-img-top" alt="...">
            <% else %>
              <img src="risk.jpeg" class="card-img-top" alt="...">
            <% end %>
              <div class="card-body">
                <h5 class="card-title"><%= game.name %></h5>
                <p class="card-text"><%= game.description %></p>
                <p class="card-text"><small class="text-muted"><i class="fas fa-user"> - <%= game.number_players %></i> <i class="fas fa-dollar-sign"> - <%= game.day_price %></i></small></p>
                <button class="btn btn-outline-primary my-2 my-sm-0 mr-3" type="submit"><% if current_user.games.include?(game) %>
                  <%= link_to "My game's details", game_path(game) %>
                  <% else %>
                  <%= link_to 'More Details and Booking', new_game_booking_path(game) %>
                  <% end %> </button>
              </div>
            </div>
          </div>
        <% end %>
      </div>
  </div>
</div>
